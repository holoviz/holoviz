# To reproduce: install 'anaconda-project', then 'anaconda-project run'
name: holoviz_tutorial
description: HoloViz Tutorial
maintainers:
- holoviz

user_fields: [maintainers]
channels: [conda-forge]

packages: &pkgs
- python=3.9
- numpy
- pandas
- dask
- xarray
- notebook
- matplotlib
- ipympl
- bokeh
- datashader
- param
- netcdf4
- fastparquet
- jupyterlab
- fsspec
- hvplot
- panel
- holoviews

dependencies: *pkgs

commands:
  notebooks:
    notebook: .
  dashboard:
    unix: cd tutorial; panel serve 06_Dashboards.ipynb --show
  test:
    unix:    cd tutorial && pytest --nbsmoke-run -k ".ipynb" --ignore envs ; cd .. && cd talks && pytest --nbsmoke-run -k ".ipynb" --ignore envs ; cd ..
    windows: cd tutorial && pytest --nbsmoke-run -k ".ipynb" --ignore envs ; cd .. && cd talks && pytest --nbsmoke-run -k ".ipynb" --ignore envs ; cd ..
    env_spec: test
  lint:
    unix:    cd tutorial && pytest --nbsmoke-lint -k ".ipynb" --ignore envs ; cd .. && cd talks && pytest --nbsmoke-lint -k ".ipynb" --ignore envs ; cd ..
    windows: cd tutorial && pytest --nbsmoke-lint -k ".ipynb" --ignore envs ; cd .. && cd talks && pytest --nbsmoke-lint -k ".ipynb" --ignore envs ; cd ..
    env_spec: test

# Optional, used to silence warnings about unused notebooks 
skip_imports:
  notebooks: true

env_specs:
  default: {}
  test:
    packages: &testpkgs
      - nbsmoke
      - pytest
    dependencies: *testpkgs

platforms:
- linux-64
- osx-64
- win-64

downloads:
  DATA_1:
    url: https://earth-data.s3.amazonaws.com/gpw_v4_population_density_rev11_2010_2pt5_min.zip
    description: Population Raster
    filename: data/raster
  DATA_2:
    url: https://datashader-data.s3.amazonaws.com/earthquakes-projected.parq
    description: Earthquakes
    filename: data/earthquakes-projected.parq
  DATA_3:
    url: https://github.com/holoviz/holoviz/raw/master/examples/assets/usgs_logo.png
    description: USGS Logo
    filename: data/usgs_logo.png
